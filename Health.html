<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Daily Health Log</title>

<style>
:root {
  --sage:#9caf88; --rose:#d4a3a3; --glass:rgba(255,255,255,.75);
}
body {
  margin:0; font-family:Quicksand,sans-serif;
  background:linear-gradient(135deg,#fdfcfb,#e2d1c3);
  display:flex; justify-content:center; align-items:center; min-height:100vh;
}
.card {
  background:var(--glass); backdrop-filter:blur(15px);
  padding:32px; border-radius:30px; width:400px; position:relative;
}
.top-left,.top-right {
  position:fixed; top:16px; font-weight:600;
}
.top-left { left:20px; }
.top-right { right:20px; }
label { display:block; margin-top:14px; font-size:.85rem; }
input,textarea {
  width:100%; padding:12px; border-radius:12px; border:none; margin-top:6px;
}
button {
  margin-top:22px; width:100%; padding:14px; border:none;
  border-radius:40px; background:var(--sage); color:white;
  font-size:1rem; cursor:pointer;
}
button:disabled { opacity:.6; cursor:not-allowed; }
#msg {
  display:none; text-align:center; margin-top:12px;
  font-weight:600; animation:pop .5s ease;
}
@keyframes pop { from{transform:scale(.8);opacity:0} to{transform:scale(1);opacity:1} }
</style>
</head>

<body>

<div class="top-left" id="streak">ðŸ”¥ 0 Day Streak</div>
<div class="top-right" id="clock"></div>

<div class="card">
<h2 style="text-align:center;font-weight:400">Daily Health Log</h2>

<label>Date</label>
<input type="date" id="entryDate">

<label>Sleep Time</label>
<input type="time" id="sleepTime">

<label>Wake Time</label>
<input type="time" id="wakeTime">

<label>Work Login</label>
<input type="time" id="workLogin">

<label>Work Logout</label>
<input type="time" id="workLogout">

<label>Screen Time (hrs)</label>
<input type="number" id="screenTime">

<label>Steps</label>
<input type="number" id="steps">

<label>Workout (minutes)</label>
<input type="number" id="workoutMin">

<label>Water Intake (liters)</label>
<input type="number" step="0.1" id="waterLiters">

<label>Weight (kg)</label>
<input type="number" step="0.1" id="weightKg">

<label>Notes</label>
<textarea id="notes"></textarea>

<div id="msg"></div>
<button id="saveBtn" onclick="save()">Save Health Log</button>
</div>

<script>
const API = "https://script.google.com/macros/s/AKfycbwJZKpjsMiyFG9F022EbeQFVWi-PINF0_zZbVo_WzisNwbQeNQ4mWUQp1oqqyFe_-ra/exec";

entryDate.value = new Date().toISOString().split("T")[0];

function save() {
  saveBtn.disabled = true;
  saveBtn.textContent = "Saving...";

  fetch(API, {
    method:"POST",
    body:JSON.stringify({
      entryDate:entryDate.value,
      sleepTime:sleepTime.value,
      wakeTime:wakeTime.value,
      workLogin:workLogin.value,
      workLogout:workLogout.value,
      screenTime:screenTime.value,
      steps:steps.value,
      workoutMin:workoutMin.value,
      waterLiters:waterLiters.value,
      weightKg:weightKg.value,
      notes:notes.value
    })
  })
  .then(r=>r.text())
  .then(t=>{
    msg.style.display="block";
    if(t==="OK"){
      msg.style.color="#5f8f6d";
      msg.textContent="ðŸŽ‰ Health log saved!";
      setTimeout(()=>location.reload(),1500);
    } else {
      msg.style.color="#b85c5c";
      msg.textContent="âš  Health log for this date already exists";
      saveBtn.disabled=false;
      saveBtn.textContent="Save Health Log";
    }
  });
}

// â° Live Clock
setInterval(()=>{
  const d=new Date();
  clock.textContent=d.toLocaleDateString("en-IN",{weekday:"long",day:"2-digit",month:"short",year:"numeric"})+
  " â€¢ "+d.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",second:"2-digit"});
},1000);

// ðŸ”¥ Simple streak display (visual only â€“ backend authoritative)
streak.textContent="ðŸ”¥ Keep the streak alive!";
</script>

</body>
</html>
