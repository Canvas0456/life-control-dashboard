<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Daily Health Log</title>

<style>
:root {
  --sage: #9caf88;
  --dusty-rose: #d4a3a3;
  --glass: rgba(255,255,255,0.75);
}

body {
  margin: 0;
  font-family: 'Quicksand', sans-serif;
  background: linear-gradient(135deg,#fdfcfb,#e2d1c3);
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
}

.card {
  background: var(--glass);
  backdrop-filter: blur(14px);
  padding: 32px;
  border-radius: 30px;
  width: 380px;
}

h1 {
  text-align: center;
  font-weight: 400;
}

label {
  display:block;
  margin-top:14px;
  font-size: 0.85rem;
}

input, textarea {
  width:100%;
  padding:12px;
  border-radius:12px;
  border:none;
  margin-top:6px;
}

button {
  margin-top:22px;
  width:100%;
  padding:14px;
  border:none;
  border-radius:40px;
  background: var(--sage);
  color:white;
  font-size:1rem;
  cursor:pointer;
}

#statusMsg {
  display:none;
  text-align:center;
  margin-top:14px;
  font-weight:600;
  color:#5f8f6d;
  animation: pop .6s ease;
}

@keyframes pop {
  from {transform:scale(.85);opacity:0}
  to {transform:scale(1);opacity:1}
}
</style>
</head>

<body>

<div class="card">
<h1>Daily Health Log</h1>

<label>Date</label>
<input type="date" id="entryDate">

<label>Sleep Time</label>
<input type="time" id="sleepTime">

<label>Wake-up Time</label>
<input type="time" id="wakeTime">

<label>Work Login</label>
<input type="time" id="workLogin">

<label>Work Logout</label>
<input type="time" id="workLogout">

<label>Screen Time (hrs)</label>
<input type="number" id="screenTime">

<label>Steps</label>
<input type="number" id="steps">

<label>Workout (minutes)</label>
<input type="number" id="workoutMin">

<label>Water Intake (liters)</label>
<input type="number" step="0.1" id="waterLiters">

<label>Weight (kg)</label>
<input type="number" step="0.1" id="weightKg">

<label>Notes</label>
<textarea id="notes"></textarea>

<div id="statusMsg">üéâ Health data saved successfully!</div>

<button onclick="saveHealth()">Save Health Log</button>
</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbwJZKpjsMiyFG9F022EbeQFVWi-PINF0_zZbVo_WzisNwbQeNQ4mWUQp1oqqyFe_-ra/exec";

document.addEventListener("DOMContentLoaded", () => {
  document.getElementById("entryDate").value =
    new Date().toISOString().split("T")[0];
});

async function saveHealth() {
  const payload = {
    entryDate: entryDate.value,
    sleepTime: sleepTime.value,
    wakeTime: wakeTime.value,
    workLogin: workLogin.value,
    workLogout: workLogout.value,
    screenTime: screenTime.value,
    steps: steps.value,
    workoutMin: workoutMin.value,
    waterLiters: waterLiters.value,
    weightKg: weightKg.value,
    notes: notes.value
  };

  const res = await fetch(API_URL, {
    method: "POST",
    body: JSON.stringify(payload)
  });

  const text = await res.text();

  if (text === "OK") {
    statusMsg.style.display = "block";
    setTimeout(() => location.reload(), 1600);
  } else if (text === "DUPLICATE") {
    statusMsg.style.display = "block";
    statusMsg.textContent = "‚ö† Health log for this date already exists";
    statusMsg.style.color = "#c06c6c";
  } else {
    statusMsg.style.display = "block";
    statusMsg.textContent = "‚ùå Save failed";
    statusMsg.style.color = "#c06c6c";
  }
}
</script>

</body>
</html>
